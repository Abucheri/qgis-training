<!DOCTYPE html>
<html>
  <head>
    <title>Introduction to GIS Fundamentals - NYC DOT</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="slide.css"/>
  </head>
  <body>
    <textarea id="source">

layout:true

<p class="footer">
<span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">Introduction to GIS Fundamentals</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="http://www.datapolitan.com" property="cc:attributionName" rel="cc:attributionURL">Richard Dunks, Eric Brelsford, and Beth Pappas</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative-Commons-License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" /></a>
</p>
---

class: center,middle

![img-center-medium](images/nycdot_logo.png)
- - -

#Introduction to GIS Fundamentals
##Richard Dunks
##Beth Pappas
###Follow along: http://bit.ly/dot_intro_gis

---

#Introductions
+ Name
+ Department / Job
+ One thing you hope to get out of class today

---

#Goals for the class 
--

+ Describe the foundational concepts of spatial analysis and mapmaking
--

+ Describe the general structure and purpose of Geographic Information Systems (GIS)
--

+ Describe spatial data formats and sources of spatial data
--

+ Apply concepts of spatial analysis using NYC Open Data to answer an NYC-related problem
--

+ Discuss resources for further information and instruction on QGIS and other spatial analysis tools

---

#Outcomes
--

+ You will be familiar with the foundational concepts in spatial analysis and mapmaking
--

+ You will understand the structure and purpose of GIS
--

+ You will be practiced in applying spaital concepts to real-world problems
--

+ You will be familiar with the differences between open source and proprietary software applications
--

+ You will be familiar with resources for further information on how to use QGIS for spatial analysis and mapmaking

---

#Goals for this morning
+ Introduce basic concepts of spatial analysis and mapping
+ Introduce popular GIS and other spatial tools
+ 

---

class:center,middle
#Why Do We Create Maps?

---

class:center,middle
#Types of Maps

---

#General Reference Maps

--

+ Show important physical features of an area
--

+ Include natural and man-made features
--

+ Usually meant to help aid in the navigation or discovery of locations
--

+ Usually fairly simple
--

+ Can be stylized based on the intended audience (tourists vs locals)

---

class:center,middle
![img-full](images/referencemap.png)

---

#Thematic Maps

--

+ Focuses on a specific theme or subject area
--

+ Features on the map represent the phenomenon being mapped
--

+ Spatial features used for reference
---
![img-full](images/thematic1.png)
#####Source: http://www.usna.usda.gov/Hardzone/ushzmap.html 

---

#Dorling Cartogram – Obesity by State
![img-full](images/dorling.png)
#####Source: http://homes.cs.washington.edu/~jheer//files/zoo/ 

---

#Area Cartogram – Electoral Votes by State
![img-center-60](images/Cartogram_US.png)
#####Source: http://training.fws.gov/courses/csp/csp7203/resources/Types_of_Maps_2013.pdf 


---

class:center,middle
#Basic Map Elements

---

#Points
        
![img-center-60](images/point_feature.png)

---

#Lines

![img-center-60](images/polyline_feature.png)

---

#Polygons
        
![img-center-60](images/polygon_feature.png)

---

class:center,middle
#How do we make maps?

---

#Geographic Information System (GIS)
> Any system for capturing, storing, checking, and displaying data related to positions on the Earth's surface

+ [National Geographic Education Encyclopedia](http://education.nationalgeographic.org/encyclopedia/geographic-information-system-gis/)

---

#Or more simply

> In a GIS, you connect _**data**_ with _**geography**_.

+ [GISgeography.com](http://gisgeography.com/what-gis-geographic-information-systems/)

---

#Geographic Information Systems (GIS)
--

+ Create interactive queries (user-created searches)
--

+ Analyze spatial information
--

+ Edit data in maps
--

+ Present the results of all these operations

---

#Basic Map Using QGIS
![img](images/spatial_example.png)

---

#The Tools

![img-full](images/gis.png)

---

#[ArcGIS](http://www.esri.com/software/arcgis/arcgis-for-desktop)

![img-center-large](images/arcgis.jpg)
[Source](http://www.esri.com/news/arcuser/1012/a-workflow-for-creating-and-sharing-maps.html)

---

#[Adobe Illustrator](http://www.adobe.com/products/illustrator.html)/[Mapublisher](http://www.avenza.com/mapublisher)
![img-full](images/illustrator.jpg)
[Source](http://www.avenza.com/resources/blog/2011/06/28/how-get-open-street-map-data-adobe-illustrator-mapublisher)

---

#[Google Earth](https://www.google.com/earth/)

![img-full](images/google_earth.png)

---

#[Google Fusion Tables](https://sites.google.com/site/fusiontablestalks/stories)
<iframe width="100%" height="430" scrolling="no" frameborder="no" src="https://www.google.com/fusiontables/embedviz?q=select+col54%2C+col55+from+1dNtdy7FuBBZ2qTxX7jgZ5Dig8n96oxRrWFjuhYpJ+where+col3+%3E%3D+0+and+col3+%3C%3D+4+and+col26+%3D+2+limit+1000&amp;viz=HEATMAP&amp;h=true&amp;lat=40.844685&amp;lng=-73.915349&amp;t=1&amp;z=12&amp;l=col54&amp;y=2&amp;tmplt=2&amp;hmd=true&amp;hmg=%2366ff0000%2C%2393ff00ff%2C%23c1ff00ff%2C%23eeff00ff%2C%23f4e300ff%2C%23f4e300ff%2C%23f9c600ff%2C%23ffaa00ff%2C%23ff7100ff%2C%23ff3900ff%2C%23ff0000ff&amp;hmo=0.6&amp;hmr=26&amp;hmw=0&amp;hml=TWO_COL_LAT_LNG"></iframe>
Source: [NYC Open Data 311 Noise Complaints, 1 Jan - 20 May 2014, Between Midnight and 4 am in the Bronx](https://www.google.com/fusiontables/DataSource?docid=1dNtdy7FuBBZ2qTxX7jgZ5Dig8n96oxRrWFjuhYpJ#map:id=3)

---

#Proprietary vs Open Source Software
--

+ Proprietary software source code is owned by an individual or an organization and tightly restricted (usually for profit)
--

+ Open source software source code is freely available to anyone for download, alteration, and republishing

---

#Proprietary vs Open Source Software

--

+ Proprietary software code is generally supported by a team of paid professionals working for the organization that owns the code
--

+ Open source software code is generally supported by a mix of paid and volunteer professionals that contribute changes back to the community
---

#Proprietary vs Open Source Software
--

+ Proprietary software is often available only by purchasing a license
--

+ Open source software is free to use though there generally a license that specifies the restrictions (if any) on its use and reuse
--

+ Companies using open source software may charge for the use of the software through their proprietary implementations or via their infrastructure

---

class:center,middle
#Examples of Open Source Mapping Software


---

#[CartoDB](https://cartodb.com/)
<iframe width="100%" height="480" frameborder="0" src="https://richard-datapolitan.cartodb.com/viz/c0d4f39e-962e-11e4-9b3b-0e9d821ea90d/embed_map" allowfullscreen webkitallowfullscreen mozallowfullscreen oallowfullscreen msallowfullscreen></iframe>

---

#[QGIS](http://www.qgis.org/)

![img-full](images/qgis.png)
Source: [NYC Open Data Portal 311 Service Requests](https://data.cityofnewyork.us/Social-Services/311-Service-Requests-from-2010-to-Present/erm2-nwe9), DOT Responsible Agency 1 January - 30 June 2015

---

<!-- opening shapefile -->
#Let's Get Started
1. [Click this link](data/boros/boros.zip) and download the file to your desktop
2. Unzip the file
3. Open QGIS

![img-left-20](images/qgis_launch.png)

---

#QGIS Getting Started
![img-full](images/qgis_nav1.png)

---

#QGIS Getting Started
![img](images/qgis_nav2.png)

---

![img-center-60](images/qgis_nav3.png)

![img-center-70](images/qgis_nav4.png)

---

#QGIS Getting Started
![img-center-90](images/qgis_nav5.png)

---

#Attribute Table (Right click on layer)
![img-center-90](images/qgis_nav6.png)
---

#Attribute Table
![img](images/qgis_nav7.png)

---

<!-- Styling -->
#Styling Features
+ Right-click the layer and select the Properties option
+ Select "Style," and finally, choose "Categorized":
        
![img-90](images/styling1.png)

---

#Styling Features
+ Select the column that has the data you want to style:
    
![img-center-60](images/styling2.png)

![img](images/styling3_box.png)

---

#Styling Features
![img](images/styling4_box.png)

---

#Styling Features
![img-center-90](images/styling5.png)

---

#Add labels to data
+ From Properties, select "Labels", "Show labels for this layer"

![img-full](images/labeling1.png)

---

#Add labels to data
+ Select the column that has the data you want to use for labels

![img](images/labeling2.png)

+ Click "Apply", "Ok"

---

#Add labels to data
![img-center-90](images/labeling3.png)

---

class: center, middle
#5 Min Break
![img-center-50](images/disappointment_cove.png)
#####Source: https://www.instagram.com/sadtopographies/

---

#Layers
![img-full](images/map1.png)

---

#Shapefiles
--
        
+ Basic file for storing map elements
--

+ Stores spatial data, like points, lines, and polygons
--

+ Multiple files comprise a "shapefile"

--

![img-center-80](images/file_struct1.png)

---

# Shapefiles

+ Have a few limitations
--

+ One geometry type (Point, Line, Polygon) per shapefile
--

+ So sometimes you end up with this:
![img](images/file_struct2.png)

---

# Shapefiles
--

+ Column names can only be letters, numbers, and underscores "_"
--

+ Column names can only be ten characters long

--

![img-center-100](images/shapefile-column-names.png)


---

class:center,middle
#Let's add another layer

---

#311 DOT Service Requests
+ [Download the data](data/dot-311/20160201_20160207_DOT_311_ServiceRequests.zip) to your desktop
+ Unzip the file
+ Open in QGIS

![img-center-60](images/DOT_311_1.png)
---

#311 DOT Service Requests

![img-full](images/DOT_311_2.png)



---
        
#Filter and Query
+ We can filter the points based on the values in the attribute table

---
        
#Filter and Query
+ Right-click on the layer and select "Filter" to open the Query Builder

![img-center-90](images/filtering_data.png)


---

#Filter and Query
![img-center-60](images/filter1.png)

---

#Filter and Query
![img-left-60](images/filter2.png)
--
![img-right-35](images/filter3.png)

---

#Filter and Query
![img-center-60](images/filter4.png)

---

#Filter and Query
![img-center-90](images/filter5.png)

<!-- stop editing -->

---
class:center
#10 Min Break
![img-center-50](images/unfortunate_cove.png)
---

#Exporting Data
--

##Once you have the results, you can export them to a new layer:
--
      
##/add image of Save As .../

##improve on this:

![img-center-60](images/projections-layer-save-as.png)
--

###Save your file in a logical directory with your other data files!

---

# Projections
--

## No one's favorite part of GIS
--

## But a necessary part of it nonetheless
--

## Convert points on Earth (**latitude** and **longitude**) to x and y coordinates


---

# Projections

## Allow maps to move from 3D space (Earth) to 2D space (eg, a piece of paper)

--

![img-center-85](images/projections-orange.jpg)

[Digital Coast Geozone](https://geozoneblog.wordpress.com/2012/05/22/happy-birthday-mercator/)

---

# Every projection distorts some part of your map

![img-center-50](images/projections-faces.png)

[FlowingData](http://flowingdata.com/2014/01/13/map-projections-illustrated-with-a-face/)

---

# Mercator - a common map projection
--

![img-center-60](images/mercator.gif)

---

# Mercator makes geometries near poles look bigger than geometries near the equator

--

![img-center-80](images/projections-mercator-puzzle.png)

[Mercator Puzzle Redux](http://bramus.github.io/mercator-puzzle-redux/)

---

# These circles are all the same size on the globe:

![img-center-50](images/projections-tissot-mercator.png)

[Progonos](http://www.progonos.com/furuti/MapProj/Normal/CartProp/Distort/distort.html)

---

# As are these:

![img-center-60](images/projections-tissot-mollweide.png)

[Progonos](http://www.progonos.com/furuti/MapProj/Normal/CartProp/Distort/distort.html)

---

# And these:

![img-center-60](images/projections-tissot-oblique-mercator.png)

[Progonos](http://www.progonos.com/furuti/MapProj/Normal/CartProp/Distort/distort.html)

---

# Projections

## For the most part we will work in **WGS 84** (latitude and longitude)

--

## But if we need to calculate area or do anything else where we want to talk about **feet** or **meters** we will use a local projection (in NYC this is called **State Plane Long Island**).

---

# Projections have unique IDs that make it easier to talk about them

--

+ WGS 84 is referred to as **EPSG:4326**

--

+ State Plane Long Island is referred to as **EPSG:2263**

--

## Remember these two and you should be set

---

# Projections

## When you want a layer to be in a different projection than it is currently in, you can re-project it
--

+ Do a **Save As**:
--

![img-right-small](images/projections-layer-save-as.png)
--

+ and pick the new projection in the CRS field:


---
class:center,middle
#LUNCH
![img-left-40](images/disappointment_cove.png)
![img-right-40](images/agony_island.png)

<div style="clear: both;"></div>

###Source: https://www.instagram.com/sadtopographies/

---
        
#Goals for Afternoon


---

#Enhancing Your Map
--
        
##Adding base maps will give your map context.
--

## In QGIS, you need a plugin to use base maps.


---

+ From the Plugins menu, select "Manage and Install Plugins"
--

![img](images/basemap_plugin.png)
--

+ Select the OpenLayers plugin and ensure it's enabled


---

##Now you can add a basemap
--

+ Go to the "Web" menu and select "Google Maps"
--

+ Select a type of Google basemap, such as Google Streets:
--

![img-center-80](images/basemap_plugin2.png)


---

##The basemap loaded:
--

![img-full](images/basemap.png)

---

##The basemap zoomed in:
--

![img-full](images/basemap_zoomed.png)


---

#Working with CSV data
--
        
##Sometimes we have data that's not a shapefile.  Commonly, this is stored in a .csv file
--

##As long as there is geometry in the dataset, you can load it into QGIS
--

+ On the Side Bar - "Open Comma-Delimited File"
--

+ Browse to the file and select it


---

##You are prompted enter information about this file, notably:
--

+ Which fields have the geography, and
--

+ Which projection you want:
--

![img](images/import_CSV.png)
--

+ Click OK and the data appears on your map


---

##Even though it's on your map, it's not a shapefile
--

+ Do a Save As and select shapfiles as the type:
--

![img-center-60](images/save_csv_asSHP2.png)
--

+ This creates a new shapefile, and adds it as a new layer to your map   


---

# Print Composer
--

## How you make exportable and printable maps in QGIS

---

## Once you're happy with your styles
--

## (Or close enough!)
--

![img-full](images/styled-map.png)

---

# Create a new print composer

![img-center-60](images/new-print-composer.png)

---

# Create a new print composer

![img-full](images/print-composer-title.png)

---

# You are greeted with a blank slate

![img-full](images/print-composer-empty.png)

---

# Use the tools on the left to add elements

![img-center-50](images/print-composer-toolbar.png)

---

# The Add New Map tool will add your current map

--

![img-full](images/print-composer-map.png)

---

# On the right, you can customize the items you add to the map

![img-center-50](images/print-composer-item-properties.png)

---

# Don't forget a title and your sources

![img-full](images/print-composer-finished.png)

---

# When you save a project, the print composers stay with it

![img-center-50](images/print-composer-saved.png)

---

# There are a few exporting options

![img-center-40](images/print-composer-export.png)

---

# Now you can share your map or print it

![img-full](images/print-composer-pdf.png)


---

#Getting More Analytical - Geoprocessing
--

##**Buffering** - Allows you to expand the area around your feature
--

##**Clipping** - Allows you to cut away what you don't need


---

##We'll do some geoprocessing on bike accidents, as they relate to bike lanes.   To review a bit:
--

+ First, bring in the bike lanes shapefile
--

+ Then, bring in the bike accidents .csv
--

+ Convert this to a shapefile


---

class:center, middle
##We want to capture bike accidents that happened outisde of bike lanes.   
--

##How might we go about this?


---

##First, we'll buffer
--

+ Open buffer tool
--

+  What is the input file?
--

+ Distance
--

+ Click OK - results?
--

+ Save this as a new layer


---

class:center, middle
##Now we want to get rid of all the accidents that don't intersect with the bike lanes. 
--

##How might we do this?


---

#Now, we'll clip
--

+ Open clipping tool
--

+ What is the input file and what is the processing file?
--

+ Click OK - results?
--

+ Save this as a new layer


---

#Your turn!
--

##Working in teams, create a scenario with this bike data, and do two things:
--

+ Some type of geoprocessing, using clipping or buffering or both
--

+ Don't forget about querying / filtering!
--

+ Then you'll add some style to your results
--

+ Finally, create an export using the Print Composer, to share with the class.


---

# Resources

---

# GIS Stack Exchange

![img-center-80](images/gis-stackexchange.png)

[GIS Stack Exchange](http://gis.stackexchange.com/)

---

# Learning QGIS

![img-center-30](images/learning-qgis.png)

[Learning QGIS](https://www.packtpub.com/application-development/learning-qgis-20)

---

# QGIS Map Design

![img-center-30](images/qgis-map-design.png)

[QGIS Map Design](http://locatepress.com/qmd)
        
---
        
#Thank You

##Richard
+ [richard@datapolitan.com](mailto:richard@datapolitan.com)
+ http://blog.datapolitan.com
+ [@rdunks1](https://twitter.com/rdunks1)/[@datapolitan](https://twitter.com/Datapolitan)        

##Beth Pappas
+ [pappas.beth@gmail.com](mailto:pappas.beth@gmail.com)
+ [@bethpappas](https://twitter.com/bethpappas)

    </textarea>
    <script src="https://gnab.github.io/remark/downloads/remark-latest.min.js">
    </script>
    <script>
      var slideshow = remark.create(
        // {
        //   slideNumberFormat: ""}
        );
    </script>
  </body>
</html>
